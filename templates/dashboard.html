<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta charset="utf-8" />
  <title>Studify - Home</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Konkhmer+Sleokchher&family=Lao+Muang+Khong&family=Koh+Santepheap&family=Hind+Siliguri&family=Holtwood+One+SC&family=Lao+Muang+Don&display=swap"
    rel="stylesheet">

  <style>
    /* --- الأساسيات --- */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background-color: #abd1f4;
      min-height: 160vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }

    .frame {
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* === تطبيق حركة الدخول Pop-in على الحاوية الرئيسية === */
    .frame .div {
      width: 100%;
      max-width: 1250px;
      min-height: 1100px;
      background-color: #ecf5fe;
      border-radius: 20px;
      position: relative;
      overflow: hidden;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      /* استخدام Pop-in */
      animation: popIn 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards; 
    }

    /* Character Elements */
    .frame .rectangle-11 {
      position: absolute;
      top: 314px;
      left: 300px;
      width: 21px;
      height: 50px;
      background-color: #fbd17dba;
      border-radius: 5px 8px 0px 0px;

    }

    .frame .rectangle-12 {
      position: absolute;
      top: 364px;
      left: 300px;
      width: 21px;
      height: 14px;
      background-color: #052f56;
      border-radius: 0px 0px 0px 5px;
    }

    .frame .rectangle-13 {
      position: absolute;
      top: 419px;
      left: 337px;
      width: 7px;
      height: 5px;
      background-color: #f7c8b4;
      transform: rotate(-23.23deg);
    }

    .frame .rectangle-14 {
      position: absolute;
      top: 362px;
      left: 320px;
      width: 14px;
      height: 61px;
      background-color: #052f56;
      border-radius: 0px 9px 0px 0px;
      transform: rotate(-23.08deg);
    }

    .frame .rectangle-15 {
      position: absolute;
      top: 355px;
      left: 331px;
      width: 13px;
      height: 63px;
      background-color: #052f56;
      border-radius: 0px 8px 0px 0px;
      transform: rotate(-51.84deg);
    }

    .frame .rectangle-16 {
      position: absolute;
      top: 302px;
      left: 307px;
      width: 7px;
      height: 12px;
      background-color: #f5c2a3;
    }

    .frame .ellipse-6 {
      position: absolute;
      top: 290px;
      left: 304px;
      width: 17px;
      height: 18px;
      background-color: #f7c8b4;
      border-radius: 8.5px / 9px;
    }

    .frame .ellipse-7 {
      position: absolute;
      top: 281px;
      left: 299px;
      width: 14px;
      height: 15px;
      background-color: #17111f;
      border-radius: 7.07px / 7.43px;
      transform: rotate(1.28deg);
    }

    .frame .ellipse-8 {
      position: absolute;
      top: 290px;
      left: 309px;
      width: 9px;
      height: 5px;
      background-color: #17111f;
      border-radius: 4.44px / 2.65px;
      transform: rotate(-7.94deg);
    }

    .frame .ellipse-9 {
      position: absolute;
      top: 294px;
      left: 303px;
      width: 8px;
      height: 5px;
      background-color: #17111f;
      border-radius: 4.12px / 2.7px;
      transform: rotate(137.33deg);
    }

    .frame .rectangle-17 {
      position: absolute;
      top: 328px;
      left: 299px;
      width: 42px;
      height: 11px;
      background-color: #f7dba0;
      border-radius: 7px 0px 0px 0px;
      transform: rotate(-129.55deg);
    }

    .frame .ellipse-10 {
      position: absolute;
      top: 329px;
      left: 345px;
      width: 6px;
      height: 6px;
      background-color: #f7c8b4;
      border-radius: 3px;
    }
    .frame .rectangle-18 {
      position: absolute;
      top: 335px;
      left: 328px;
      width: 23px;
      height: 8px;
      background-color: #f7dba0;
      transform: rotate(137.70deg);
    }

    .frame .rectangle-19 {
      position: absolute;
      top: 406px;
      left: 361px;
      width: 7px;
      height: 5px;
      background-color: #f7c8b4;
      transform: rotate(-51.99deg);
    }

    .frame .rectangle-20 {
      position: absolute;
      top: 406px;
      left: 364px;
      width: 13px;
      height: 6px;
      background-color: #272222;
      border-radius: 0px 15px 0px 0px;
      transform: rotate(-51.95deg);
    }

    .frame .rectangle-21 {
      position: absolute;
      top: 422px;
      left: 339px;
      width: 13px;
      height: 6px;
      background-color: #272222;
      border-radius: 0px 15px 0px 0px;
      transform: rotate(-22.74deg);
    }

    .frame .ellipse-11 {
      position: absolute;
      top: 321px;
      left: 334px;
      width: 6px;
      height: 6px;
      background-color: #f7c8b4;
      border-radius: 3px;
    }

    /* Navigation Links */
    .frame .text-wrapper-7 {
      position: absolute;
      top: 21px;
      left: 988px;
      font-family: "Konkhmer Sleokchher", Helvetica;
      font-weight: 7000000;
      color: #000000;
      font-size: 24px;
      letter-spacing: 0;
      line-height: normal;
    }

    .frame .text-wrapper-10 {
      position: absolute;
      top: 21px;
      left: 868px;
      font-family: "Konkhmer Sleokchher", Helvetica;
      font-weight: 400;
      color: #000000;
      font-size: 24px;
      letter-spacing: 0;
      line-height: normal;
    }

    .frame .text-wrapper-11 {
      position: absolute;
      top: 21px;
      left: 1123px;
      font-family: "Konkhmer Sleokchher", Helvetica;
      font-weight: 400;
      color: #000000;
      font-size: 24px;
      letter-spacing: 0;
      line-height: normal;
    }

    /* Calendar Items */

    .frame .rectangle-32 {
      position: absolute;
      top: 331px;
      left: 322px;
      width: 23px;
      height: 8px;
      background-color: #f7dba0;
      transform: rotate(108.98deg);
    }

    .frame .rectangle-33 {
      position: absolute;
      top: 430px;
      left: 553px;
      width: 45px;
      height: 31px;
      background-color: #fbcd76;
      border-radius: 5px;
    }

    .frame .rectangle-34 {
      position: absolute;
      top: 307px;
      left: 713px;
      width: 45px;
      height: 31px;
      background-color: #0bb9b7;
      border-radius: 5px;
    }

    .frame .text-wrapper-16 {
      position: absolute;
      top: 397px;
      left: 927px;
      font-family: "Koh Santepheap", Helvetica;
      font-weight: 400;
      color: #2c3e57;
      font-size: 20px;
      letter-spacing: 0;
      line-height: normal;
    }

    .frame .text-wrapper-17 {
      position: absolute;
      top: 604px;
      left: 928px;
      font-family: "Koh Santepheap", Helvetica;
      font-weight: 400;
      color: #2c3e57;
      font-size: 20px;
      letter-spacing: 0;
      line-height: normal;
    }

    .frame .rectangle-35 {
      position: absolute;
      top: 639px;
      left: 928px;
      width: 231px;
      height: 42px;
    }

    /* Book & Character details */

    .frame .rectangle-36 {
      position: absolute;
      top: 194px;
      left: 744px;
      width: 33px;
      height: 7px;
      background-color: #653e3e;
      border-radius: 1px 1px 0px 0px;
    }

    .frame .rectangle-37 {
      position: absolute;
      top: 190px;
      left: 749px;
      width: 34px;
      height: 4px;
      background-color: #363a6d;
      border-radius: 1px 1px 1px 0px;
    }

    .frame .text-wrapper-18 {
      position: absolute;
      top: 316px;
      left: 349px;
      transform: rotate(48.03deg);
      font-family: "Holtwood One SC", Helvetica;
      font-weight: 400;
      color: #000000;
      font-size: 2px;
      letter-spacing: 0;
      line-height: normal;
    }
    .frame .rectangle-38 {
      position: absolute;
      top: 186px;
      left: 744px;
      width: 27px;
      height: 4px;
      background-color: #2d662b;
      border-radius: 1px 1px 0px 1px;
    }

    .frame .rectangle-39 {
      position: absolute;
      top: 311px;
      left: 340px;
      width: 12px;
      height: 20px;
      background-color: #653e3e;
      transform: rotate(33.59deg);
    }

    .frame .rectangle-40 {
      position: absolute;
      top: 313px;
      left: 339px;
      width: 19px;
      height: 14px;
      background-color: #653e3e;
      border: 1px solid;
      border-color: #0000004f;
      transform: rotate(-39.78deg);
    }

    /* --- العناصر الداخلية --- */
    .frame .ellipse {
      position: absolute;
      top: -39px;
      left: 671px;
      width: 914px;
      height: 1190px;
      background-color: #97bde12e;
      border-radius: 457px / 595px;
      transform: rotate(17.45deg);
    }

    .frame .ellipse-2 {
      position: absolute;
      top: -290px;
      left: -325px;
      width: 799px;
      height: 713px;
      background-color: #ddebf9;
      border-radius: 399.5px / 356.5px;
    }

    /* الهيدر والروابط */
    .frame .rectangle-3 {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 85px;
      background-color: #fefefe;
    }

    .frame .text-wrapper-3 {
      position: absolute;
      top: 7px;
      left: 113px;
      font-family: "Konkhmer Sleokchher", Helvetica;
      font-weight: 650;
      color: #1e1d45;
      font-size: 40px;
    }

    .frame .download {
      position: absolute;
      top: 0;
      left: 6px;
      width: 128px;
      height: 86px;
      object-fit: cover;
    }

    .frame .nav-links {
      position: absolute;
      top: 21px;
      right: 50px;
      display: flex;
      gap: 30px;
      z-index: 10;
    }

    .frame .nav-links a {
      font-family: "Konkhmer Sleokchher", Helvetica;
      font-weight: 400;
      color: #000000;
      font-size: 24px;
      text-decoration: none;
      cursor: pointer;
    }


    /* --- قسم إضافة التاسك (يمين) --- */
    .frame .rectangle {
      position: absolute;
      top: 201px;
      right: 50px;
      width: 295px;
      height: 541px;
      background-color: #fefefe;
      border-radius: 10px;
      box-shadow: 0px 4px 4px 2px #00000040;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 15px;
      z-index: 10;
    }

    .frame .text-wrapper-2 {
      font-size: 25px;
      font-family: "Konkhmer Sleokchher", Helvetica;
      font-weight: 400;
      color: #000000;
      text-align: center;
      margin-bottom: 10px;
    }

    .frame label {
      font-family: "Koh Santepheap", Helvetica;
      color: #2c3e57;
      font-size: 20px;
      margin-bottom: -10px;
    }

    .frame input.task-input,
    .frame select.task-input {
      width: 100%;
      height: 42px;
      border: 1px solid #0000001c;
      background-color: #ecf6ff;
      border-radius: 9px;
      padding: 0 10px;
      font-size: 15px;
      outline: none;
    }

    .frame input.task-input:focus,
    .frame select.task-input:focus {
      border-color: #0bb9b7;
    }

    .frame button.add-task-btn {
      margin-top: 20px;
      width: 100%;
      height: 45px;
      background-color: #00a8a0;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
      font-size: 18px;
      transition: background 0.3s;
    }

    .frame button.add-task-btn:hover {
      background-color: #008f87;
    }


    /* --- قسم إضافة المادة (Add New Subject - Box) --- */
    .frame .rectangle-9 {
      position: absolute;
      top: 375px;
      left: 43px;
      width: 273px;
      height: 120px;
      background-color: #fefefe;
      border-radius: 10px;
      border: 1px solid #00000024;
      box-shadow: 0px 4px 4px #00000040;
      padding: 15px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: 10px;
      z-index: 10;
    }
    .frame .text-wrapper-5 {
      font-size: 20px;
      font-family: "Konkhmer Sleokchher", Helvetica;
      color: #000000;
      margin-bottom: 5px;
    }

    .add-subject-container {
      display: flex;
      gap: 5px;
    }

    .frame input.subject-input {
      width: 100%;
      height: 36px;
      background-color: #ecf5fe;
      border-radius: 10px;
      border: 1px solid #0000002e;
      padding: 0 10px;
      outline: none;
    }

    .frame button.add-btn {
      height: 36px;
      background-color: #00a8a0;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      padding: 0 15px;
      font-weight: bold;
      transition: background 0.3s;
    }

    .frame button.add-btn:hover {
      background-color: #008f87;
    }

    /* --- حاوية عرض المواد (Subjects Container) --- */
    #subjectsContainer {
      position: absolute;
      top: 520px;
      left: 48px;
      width: 850px;
      height: 540px;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-content: flex-start;
      overflow-y: auto;
      gap: 20px 0;
      padding: 10px;
      z-index: 5;
      background-color: transparent;
      box-shadow: none;
      border: none;
    }

    /* تصميم مربع المادة الواحد (Card) */
    .subject-card {
      width: 49%;
      min-height: 250px;
      background-color: white;
      border-radius: 15px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      display: flex;
      flex-direction: column;
      padding: 15px;
      position: relative;
      transition: all 0.3s ease;
      cursor: pointer;
    }


    .subject-card.expanded {
      width: 850px;
      min-height: 200px;
    }

    .subject-card:hover {
      transform: translateY(-5px);
    }

    .subject-title {
      font-family: "Konkhmer Sleokchher", Helvetica;
      font-size: 18px;
      color: #10203a;
      margin-bottom: 10px;
      border-bottom: 2px solid #ecf5fe;
      padding-bottom: 5px;
      width: 100%;
    }

    /* زر الحذف */
    .delete-sub-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: none;
      border: none;
      color: #ff4d4d;
      font-weight: bold;
      cursor: pointer;
      font-size: 18px;
    }

    /* قائمة التاسكات داخل المربع */
    .tasks-list {
      flex: 1;
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 8px;
      overflow-y: auto;
      max-height: 200px;
      padding-right: 5px;
    }

    .task-entry {
      font-family: 'Inter', sans-serif;
      font-size: 12px;
      color: #333;
      background: #ecf6ff;
      padding: 5px;
      border-left: 5px solid transparent; /* default */
      border-radius: 5px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.3s ease;
    }
    
    .task-entry.completed {
        border-left: 5px solid #00a8a0;
        opacity: 0.7;
    }
    
    .task-entry.completed span {
        text-decoration: line-through;
    }

    .task-time {
      color: #00a8a0;
      font-weight: bold;
      font-size: 11px;
    }

    /* 3. (اختياري) تجميل شكل شريط التمرير */
    .tasks-list::-webkit-scrollbar {
      width: 6px;
    }

    .tasks-list::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
    }

    .tasks-list::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 10px;
    }

    .tasks-list::-webkit-scrollbar-thumb:hover {
      background: #00a8a0;
    }

    /* تفاصيل الديكور والتقويم (زي ما هي) */
    /* الخلفية البيضاء للتقويم */
    .frame .rectangle-6 {
      position: absolute;
      top: 201px;
      left: 437px;
      width: 387px;
      height: 271px;
      background-color: #fefefe;
      border-radius: 15px;
      border: 1px solid #00000042;
      box-shadow: 0px 4px 4px #00000040;
    }
    .frame .rectangle-7 {
      position: absolute;
      top: 201px;
      left: 437px;
      width: 387px;
      height: 41px;
      background-color: #232642;
      border-radius: 15px 15px 0px 0px;
    }

    /* الدوائر الملونة */
    .frame .ellipse-3 {
      position: absolute;
      top: 217px;
      left: 452px;
      width: 12px;
      height: 12px;
      background-color: #eaf4fd;
      border-radius: 6px;
    }

    .frame .ellipse-4 {
      position: absolute;
      top: 217px;
      left: 474px;
      width: 12px;
      height: 12px;
      background-color: #d7a328;
      border-radius: 6px;
    }

    .frame .ellipse-5 {
      position: absolute;
      top: 217px;
      left: 496px;
      width: 12px;
      height: 12px;
      background-color: #eaf4fd;
      border-radius: 6px;
    }

    /* صورة أو إطار داخلي */
    .frame .rectangle-8 {
      position: absolute;
      top: 265px;
      left: 450px;
      width: 362px;
      height: 202px;
    }

    /* نصوص أيام الأسبوع */
    .frame .sun-mon-tue-wen-thu {
      position: absolute;
      top: 245px;
      left: 458px;
      width: 400px;
      font-family: "Koh Santepheap", Helvetica;
      font-weight: 400;
      color: #00000085;
      font-size: 14px;
      letter-spacing: 0.70px;
      line-height: normal;
    }

    /* الخطوط (الشبكة) */
    .frame .line {
      top: 265px;
      left: 498px;
      width: 1px;
      height: 201px;
      position: absolute;
      background-color: #000;
      opacity: 0.2;
    }

    .frame .line-2 {
      top: 265px;
      left: 549px;
      width: 1px;
      height: 201px;
      position: absolute;
      background-color: #000;
      opacity: 0.2;
    }

    .frame .line-3 {
      top: 265px;
      left: 601px;
      width: 1px;
      height: 201px;
      position: absolute;
      background-color: #000;
      opacity: 0.2;
    }

    .frame .line-4 {
      top: 265px;
      left: 657px;
      width: 1px;
      height: 201px;
      position: absolute;
      background-color: #000;
      opacity: 0.2;
    }

    .frame .line-5 {
      top: 265px;
      left: 708px;
      width: 1px;
      height: 201px;
      position: absolute;
      background-color: #000;
      opacity: 0.2;
    }

    .frame .line-6 {
      top: 265px;
      left: 762px;
      width: 1px;
      height: 200px;
      position: absolute;
      background-color: #000;
      opacity: 0.2;
    }

    .frame .line-7 {
      top: 303px;
      left: 452px;
      width: 361px;
      height: 1px;
      position: absolute;
      background-color: #000;
      opacity: 0.2;
    }

    .frame .line-8 {
      top: 343px;
      left: 451px;
      width: 361px;
      height: 1px;
      position: absolute;
      background-color: #000;
      opacity: 0.2;
    }

    .frame .line-9 {
      top: 385px;
      left: 451px;
      width: 362px;
      height: 1px;
      position: absolute;
      background-color: #000;
      opacity: 0.2;
    }

    .frame .line-10 {
      top: 423px;
      left: 450px;
      width: 361px;
      height: 1px;
      position: absolute;
      background-color: #000;
      opacity: 0.2;
    }

    /* الأرقام داخل الجدول */
    .frame .element {
      position: absolute;
      top: 270px;
      left: 458px;
      width: 346px;
      font-family: "Hind Siliguri", Helvetica;
      font-weight: 400;
      color: #0000007a;
      font-size: 12px;
      letter-spacing: 0;
      line-height: normal;
    }

    .frame .image-2 {
      position: absolute;
      top: 125px;
      left: 348px;
      width: 138px;
      height: 60px;
      object-fit: cover;
    }

    .frame .image-3 {
      position: absolute;
      top: 0;
      left: 0;
      width: 140px;
      height: 90px;
      object-fit: cover;
    }

    .frame .nav-links a:hover {
      color: #2563eb;
    }

    /* === تعريف الحركات === */
    @keyframes fade-in {
      0% {
        opacity: 0;
        transform: translateY(-10px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes popIn {
      0% {
        opacity: 0;
        transform: scale(0.5); /* يبدأ بحجم 50% */
      }
      60% {
        opacity: 1;
        transform: scale(1.05); /* يصل إلى 105% (تأثير الارتداد) */
      }
      100% {
        transform: scale(1); /* يستقر على الحجم الطبيعي 100% */
      }
    }

    /* تنسيق المهمة الفاشلة (التي فات موعدها) */
    .task-entry.failed {
      border-left: 5px solid #ff4d4d;
      /* خط أحمر على اليسار */
      background-color: #fff0f0;
      /* خلفية حمراء فاتحة */
    }

    .task-entry.failed .task-time {
      color: #ff4d4d;
      font-weight: bold;
    }

    .task-entry.failed span {
      text-decoration: line-through;
      color: #888;
    }
  </style>
</head>

<body>
  <div class="frame">
    <div class="div">
      <div class="ellipse"></div>
      <div class="ellipse-2"></div>

      <div class="rectangle-3"></div>
      <div class="text-wrapper-3">studify</div>
      <img class="download" src="https://c.animaapp.com/9RpxXRdg/img/download222-1@2x.png" />
      <div class="nav-links">
        <a href="/profile-page">Profile</a>
        <a href="friends.html">Friends</a>
        <a href="index.html">Log out</a>
      </div>

      <div class="rectangle">
        <div class="text-wrapper-2">Add New Task</div>

        <label>Task Name</label>
        <input type="text" id="taskName" class="task-input" placeholder="Task name">

        <label>Subject</label>
        <select id="taskSubject" class="task-input">
          <option value="" disabled selected>Select Subject</option>
        </select>

        <label>Due Date</label>
        <input type="date" id="taskDate" class="task-input">

        <label>Time (mins)</label>
        <input type="number" id="taskTime" class="task-input" placeholder="e.g. 45" min="1">

        <button id="addTaskBtn" class="add-task-btn">Add Task</button>
      </div>

      <div class="girl-illustration">
        <div class="rectangle-11"></div>
        <div class="rectangle-12"></div>
        <div class="rectangle-14"></div>
        <div class="rectangle-15"></div>
        <div class="rectangle-16"></div>

        <div class="ellipse-6"></div>
        <div class="ellipse-7"></div>
        <div class="ellipse-8"></div>
        <div class="ellipse-9"></div>
        <div class="ellipse-10"></div>
        <div class="ellipse-11"></div>

        <div class="rectangle-13"></div>
        <div class="rectangle-17"></div>
        <div class="rectangle-18"></div>

        <div class="rectangle-19"></div>
        <div class="rectangle-20"></div>
        <div class="rectangle-21"></div>
        <div class="rectangle-32"></div>
      </div>


      <div class="rectangle-39"></div>
      <div class="rectangle-36"></div>
      <div class="rectangle-37"></div>
      <div class="rectangle-38"></div>
      <div class="rectangle-40"></div>
      <div class="text-wrapper-18">MATH</div>




      <div class="rectangle-9">
        <div class="text-wrapper-5">Add New Subject</div>
        <div class="add-subject-container">
          <input type="text" id="subjectInput" class="subject-input" placeholder="Subject name...">
          <button id="addSubjectBtn" class="add-btn">+</button>
        </div>
      </div>

      <div id="subjectsContainer">
        </div>


      <div class="rectangle-6"></div>
      <div class="rectangle-7"></div>

      <div class="ellipse-3"></div>
      <div class="ellipse-4"></div>
      <div class="ellipse-5"></div>

      <img class="rectangle-8" src="https://c.animaapp.com/9RpxXRdg/img/rectangle-8.svg" />

      <p class="sun-mon-tue-wen-thu">
        Sun&nbsp;&nbsp;&nbsp;&nbsp; Mon&nbsp;&nbsp;&nbsp;&nbsp; Tue&nbsp;&nbsp;&nbsp;&nbsp;
        Wen&nbsp;&nbsp;&nbsp;&nbsp; Thu&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fri&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sat
      </p><div class="line"></div>
      <div class="line-2"></div>
      <div class="line-3"></div>
      <div class="line-4"></div>
      <div class="line-5"></div>
      <div class="line-6"></div>
      <div class="line-7"></div>
      <div class="line-8"></div>
      <div class="line-9"></div>
      <div class="line-10"></div>

      <div class="rectangle-33"></div>
      <div class="rectangle-34"></div>
      <p class="element">
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /><br />5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11
        <br /><br />12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;13&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        14&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        17&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 18
        <br /><br />19&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;20&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;21&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;22&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;23&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        25 <br /><br />26&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        28&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        30
      </p>


      <img class="image-2" src="https://c.animaapp.com/9RpxXRdg/img/image-4@2x.png" />
      <img class="image-3" src="https://c.animaapp.com/9RpxXRdg/img/image-5@2x.png" />

    </div>
  </div>
<script>
    // ⭐️ 1. API Endpoint URL (Adjust if your server is different)
    const BASE_API_URL = 'https://studify-dye7gqa7hfchgzdk.italynorth-01.azurewebsites.net/dashboard'; 
    
    // 2. Element Definitions
    const addSubjectBtn = document.getElementById('addSubjectBtn');
    const subjectInput = document.getElementById('subjectInput');
    const subjectsContainer = document.getElementById('subjectsContainer');
    const taskSubjectSelect = document.getElementById('taskSubject');
    const addTaskBtn = document.getElementById('addTaskBtn');
    const taskNameInput = document.getElementById('taskName');
    const taskTimeInput = document.getElementById('taskTime');
    const taskDateInput = document.getElementById('taskDate');

    // Variable to store Subject IDs (Key: subjectId, Value: subjectName)
    let subjectIdMap = {};

    // ------------------------------------------------------------------
    // ⭐️ API Calls Functions
    // ------------------------------------------------------------------

    /**
     * Fetches all subjects and tasks from the Flask API and updates the UI.
     */
    async function fetchSubjectsAndTasks() {
        try {
            const [subjectsRes, tasksRes] = await Promise.all([
                fetch(`${BASE_API_URL}/subjects/`),
                fetch(`${BASE_API_URL}/tasks/`)
            ]);
            
            if (!subjectsRes.ok || !tasksRes.ok) {
                // If Flask returns 401 (Unauthorized), it means the session is missing.
                throw new Error('Failed to fetch data. Authentication required (User must be logged in).');
            }

            const subjects = await subjectsRes.json();
            const tasks = await tasksRes.json();

            // Clear and prepare the UI
            subjectsContainer.innerHTML = '';
            taskSubjectSelect.innerHTML = '<option value="" disabled selected>Select Subject</option>'; 
            subjectIdMap = {}; 

            // 1. Render Subject Cards and populate the Subject Select list
            subjects.forEach(subject => {
                renderSubjectCard(subject);
                subjectIdMap[subject.id] = subject.name; 
                
                const option = document.createElement('option');
                option.value = subject.id; // Value sent to Flask is the Subject ID
                option.textContent = subject.name;
                taskSubjectSelect.appendChild(option);
            });

            // 2. Distribute tasks to their correct subject cards
            tasks.forEach(task => {
                task.subjectName = subjectIdMap[task.subject_id]; 
                addTaskToCard(task); 
            });
            
            checkOverdueTasksUI(); // Apply overdue visual styling

        } catch (error) {
            console.error('Error fetching data from Flask:', error);
            alert(`Error: ${error.message}. Check Flask server status.`);
        }
    }

    /**
     * Adds a new subject via POST /subjects/
     */
    async function addSubjectAPI() {
        const subjectName = subjectInput.value.trim();
        if (subjectName === "") { alert("Please enter the subject name."); return; }
        
        try {
            const response = await fetch(`${BASE_API_URL}/subjects/`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name: subjectName })
            });

            const result = await response.json(); 

            if (response.ok) {
                await fetchSubjectsAndTasks(); 
                subjectInput.value = ''; 
            } else {
                alert(`Addition Failed: ${result.error || result.message || 'Server error'}`);
            }
        } catch (error) {
            console.error('Error adding subject:', error);
            alert('An error occurred while connecting to the server to add the subject.');
        }
    }/**
     * Adds a new task via POST /tasks/
     */
    async function addTaskAPI() {
        const name = taskNameInput.value.trim();
        const subjectId = taskSubjectSelect.value; 
        const time = taskTimeInput.value;
        const date = taskDateInput.value;

        if (!name  ||!subjectId || !time || !date) {
            alert("Please fill all task fields.");
            return;
        }
        
        const taskData = {
            name: name,
            time: parseInt(time),
            date: date,
            subject_id: parseInt(subjectId) 
        };

        try {
            const response = await fetch(`${BASE_API_URL}/tasks/`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(taskData)
            });
            
            const result = await response.json();

            if (response.ok) {
                await fetchSubjectsAndTasks();
                
                // Clear inputs
                taskNameInput.value = '';
                taskTimeInput.value = '';
                taskDateInput.value = '';
                taskSubjectSelect.value = '';

            } else {
                alert(`Addition Failed: ${result.error || result.message || 'Server error'}`);
            }
        } catch (error) {
            console.error('Error adding task:', error);
            alert('An error occurred while connecting to the server to add the task.');
        }
    }

    /**
     * Marks a task as complete via PUT /tasks/id/complete
     */
    window.completeTask = async function (taskId) {
        try {
            const response = await fetch(`${BASE_API_URL}/tasks/${taskId}/complete`, {
                method: 'PUT'
            });

            const result = await response.json();

            if (response.ok) {
                await fetchSubjectsAndTasks(); 
            } else {
                alert(`Completion Failed: ${result.error || result.message || 'Server error'}`);
            }
            
        } catch (error) {
            console.error('Error completing task:', error.message);
            alert(`Failed to complete task: ${error.message}`);
        }
    }
    
    /**
     * Deletes a subject via DELETE /subjects/id
     */
    window.removeSubject = async function (subjectId, subjectName) {
        if (!confirm(`Are you sure you want to delete the subject "${subjectName}" and all its tasks?`)) return;
        try {
            const response = await fetch(`${BASE_API_URL}/subjects/${subjectId}`, {
                method: 'DELETE'
            });

            const result = await response.json();
            
            if (response.ok) {
                await fetchSubjectsAndTasks(); 
            } else {
                alert(`Deletion Failed: ${result.error || result.message || 'Server error'}`);
            }
        } catch (error) {
            console.error('Error deleting subject:', error.message);
            alert(`Failed to delete subject: ${error.message}`);
        }
    }

    // ------------------------------------------------------------------
    // UI Rendering Functions
    // ------------------------------------------------------------------

    /**
     * Builds and displays a subject card.
     * @param {Object} subject - { id, name }
     */
    function renderSubjectCard(subject) {
        const newCard = document.createElement('div');
        newCard.id = `subject-${subject.id}`; 
        newCard.className = 'subject-card';

        newCard.innerHTML = `
            <h3 class="subject-title">${subject.name}</h3>
            <button class="delete-sub-btn" onclick="removeSubject(${subject.id}, '${subject.name}')">X</button>
            <div class="tasks-list">
                <p class="no-tasks-message" style="text-align: center; color: #999; font-size: 14px; padding: 10px;">No tasks available for this subject.</p>
               </div>`
        ;
        
        // Expand/Collapse logic
        newCard.addEventListener('click', (e) => {
            // Prevent expanding when clicking the delete button
            if (!e.target.classList.contains('delete-sub-btn') && e.target.tagName !== 'BUTTON') {
                window.toggleExpand(`subject-${subject.id}`);
            }
        });

        subjectsContainer.appendChild(newCard);
    }

    /**
     * Adds a task entry to its corresponding subject card.
     * @param {Object} task - { id, name, time, date, completed, subject_id, subjectName }
     */
    function addTaskToCard(task) {
        const targetCard = document.getElementById(`subject-${task.subject_id}`);

        if (targetCard) {
            const tasksList = targetCard.querySelector('.tasks-list');
            const noTasksMsg = tasksList.querySelector('.no-tasks-message');
            if (noTasksMsg) {
                tasksList.removeChild(noTasksMsg);
            }

            const taskEntry = document.createElement('div');
            taskEntry.className = 'task-entry';
            taskEntry.id = `task-${task.id}`;
            taskEntry.setAttribute('data-due-date', task.date);

            const dateObj = new Date(task.date);
            const formattedDate = dateObj.toLocaleDateString('en-US', { day: 'numeric', month: 'short', year: 'numeric' }); 
            
            let buttonHTML = '';
            let timeText = `${task.time} Mins`;
            
            if (task.completed) {
                taskEntry.classList.add('completed');
                timeText = 'Completed!';
                // Disabled button for completed tasks
                buttonHTML = <button disabled style="background-color: #ccc; border: none; border-radius: 5px; padding: 2px 8px;">✓</button>;
            } else {
                // Active button for pending tasks
                buttonHTML = <button onclick="completeTask(${task.id})" style="background: #00a8a0; color: white; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px; padding: 2px 8px; font-size: 16px; font-weight: bold;">✓</button>;
            }
            
            taskEntry.innerHTML = `
                <span style="flex-grow: 1;">
                    ${task.name} <span style="font-size:0.9em; color:#555;">(Due: ${formattedDate})</span>
                </span>
                <span class="task-time">${timeText}</span>
                ${buttonHTML}
            `;
            
            tasksList.appendChild(taskEntry);
        }
    }
    
    // ------------------------------------------------------------------
    // Helper Functions
    // ------------------------------------------------------------------

    /**
     * Toggles the expansion state of a subject card and moves it to the top.
     */
    window.toggleExpand = function(id){
        const card = document.getElementById(id);
        const current = document.querySelector('.expanded');
        if(current && current !== card) { 
             current.classList.remove('expanded'); 
        }
        card.classList.toggle('expanded');
        if(card.classList.contains('expanded')) {
             subjectsContainer.insertBefore(card, subjectsContainer.firstChild);
        }
    }

    /**
     * Checks tasks for overdue dates and applies the 'failed' style (UI only).
     */
    function checkOverdueTasksUI(){
        const tasks = document.querySelectorAll('.task-entry:not(.completed)');
        const now = new Date(); 
        now.setHours(0,0,0,0); // Set to midnight for date comparison
        
        tasks.forEach(t => {
            const d = new Date(t.getAttribute('data-due-date'));
            if(d < now) {
                t.classList.add('failed');
                t.querySelector('.task-time').innerText = 'Failed';
                t.querySelector('button')?.remove(); // Remove the complete button if failed
            } else {
                 t.classList.remove('failed'); 
            }
        });
    }// ------------------------------------------------------------------
    // Event Listeners and Initialization
    // ------------------------------------------------------------------

    document.addEventListener('DOMContentLoaded', () => {
        // Set minimum date input to today
        const today = new Date().toISOString().split('T')[0];
        taskDateInput.setAttribute('min', today);
        
        // Initial data load
        fetchSubjectsAndTasks();
        
        // Link buttons to API functions
        if (addSubjectBtn) addSubjectBtn.addEventListener('click', addSubjectAPI);
        if (subjectInput) {
            subjectInput.addEventListener('keypress', function (e) {
                if (e.key === 'Enter') { e.preventDefault(); addSubjectAPI(); }
            });
        }
        if (addTaskBtn) addTaskBtn.addEventListener('click', addTaskAPI);
        
        // Check for overdue tasks hourly
        setInterval(checkOverdueTasksUI, 3600000); 
    });

</script> 
</body>


</html>
